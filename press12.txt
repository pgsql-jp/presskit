＃PostgreSQL 12がリリースされました！

PostgreSQLグローバル開発グループは本日、世界で最も先進的なオープンソースデータベースの最新バージョンであるPostgreSQL 12のリリースを発表しました。

PostgreSQL 12の機能強化には、特に大規模なデータセットでのクエリパフォーマンスと、全体的なスペース使用率の大幅な改善が含まれます。
このリリースは、アプリケーション開発者に、SQL/JSONパス式のサポート、共通テーブル式（「WITH」）クエリの実行方法の最適化、生成された列などの新機能を提供します。
PostgreSQLコミュニティは、国際化、認証、PostgreSQLを容易に管理する方法を提供することでPostgreSQLの拡張性と堅牢性を引き続きサポートします。
このリリースでは、開発者がデータを保存する独自のメソッドを作成できる、プラガブルテーブルストレージインターフェイスも導入されています。

**HOLD FOR QUOTE**

PostgreSQLは20年以上にわたりオープンソースで開発されてきたお陰で、あらゆる規模の組織にとって好ましいオープンソースリレーショナルデータベースであり続けています。
このプロジェクトは、DB-Enginesによって2018年に「DBMS of the Year」として2年連続で特集され、OSCON 2019で「Lifetime Achievement」オープンソース賞を受賞するなど、業界全体で認知され続けています。

##全体的なパフォーマンスの改善

PostgreSQL 12は、インデックスシステムとパーティション分割のパフォーマンスとメンテナンスを大幅に強化します。

PostgreSQLの標準タイプのインデックスであるBツリーインデックスは、PostgreSQL 12で最適化されており、インデックスが頻繁に変更されるワークロードをより適切に処理します。
PostgreSQL 12では、TPC-Cベンチマークを使用して、スペース使用率の平均40％の削減とクエリパフォーマンスの全体的に向上していることを確認しました。

パーティション化されたテーブルでのクエリは、特に限定されたサブセットからデータを取得するだけでよい数千のパーティションを持つテーブルで、明らかに改善されています。
 PostgreSQL 12では、「INSERT」と「COPY」を使用してパーティションテーブルにデータを追加するパフォーマンスも向上し、クエリをブロックせずに新しいパーティションをテーブルにアタッチする機能も含まれました。

PostgreSQL 12のインデックスには、GiST、GIN、およびSP-GiSTインデックスで先行書き込みログ生成のオーバーヘッドの削減、GiSTインデックスでカバリングインデックス（INCLUDE句）を作成する機能、SP-GiSTインデックスを使用して距離演算子（<->）によるK近傍クエリを実行する機能、およびCREATE STATISTICSが不均一に分布する列を評価するMCV（Most Common Value）統計をサポートするなど、全体的なパフォーマンスに影響する改良が追加されています。

PostgreSQL 11で導入されたLLVMを使用したジャストインタイム（JIT）コンパイルがデフォルトで有効になりました。
 JITコンパイルは、WHERE句、ターゲットリスト、集計、および一部の内部操作で式実行のパフォーマンスが向上します。JITコンパイルはPostgreSQLインストールがLLVMでコンパイルまたはパッケージ化されている場合に使用できます。

## SQLの適合性と機能の強化

PostgreSQLは、SQL標準に準拠していることで知られています（ "POSTGRES"から "PostgreSQL"に名前が変更された理由の1つ）。

PostgreSQL 12では、SQL / JSON標準で定義されたJSONパス式を使用して、JSONドキュメントに対してクエリを実行する機能が導入されています。
このようなクエリでは、JSONB形式で保存されたドキュメントの既存のインデックス作成メカニズムを利用して、データを効率的に取得できます。

「WITH」クエリとも呼ばれる共通テーブル式は、PostgreSQL 12によって自動的にインライン化できるようになりました。
これにより、多くの既存のクエリのパフォーマンスを向上させることができます。
このリリースでは、WITHクエリは再帰的でなく、副作用がなく、クエリの後半で一度だけ参照される場合にインライン化できます。

PostgreSQL 12では、「生成された列」が導入されています。
標準SQLで定義されているこのタイプの列は、同じ表の他の列の内容から値を計算します。
このバージョンでは、PostgreSQLは計算された値がディスクに保存される「格納された生成列」をサポートします。


##国際化

PostgreSQL 12は、ユーザーが「非決定的照合」を定義できるようにすることでICU照合のサポートを拡張しました。たとえば、大文字と小文字を区別しない比較や、アクセントを区別しない比較ができるようになります。

##認証

PostgreSQLは、追加のセキュリティと機能性の提供による様々な改良により堅牢な認証方法のサポートを拡張します。このリリースでは、GSSAPIインターフェースを介した認証にクライアント側とサーバー側の両方の暗号化が導入されました。また、PostgreSQLがOpenLDAPでコンパイルされている場合にPostgreSQLがLDAPサーバーを検出できるようになりました。

さらに、PostgreSQL 12は多要素認証の形式をサポートするようになりました。
PostgreSQLサーバーは、"clientcert=verify-full"オプションを使用することで認証クライアントに対してユーザー名とともに有効なSSL証明書の提供を要求し、これを別の認証方法の要件（scram-sha-256など）と組み合わせることができるようになりました。

##管理

PostgreSQL 12では、「REINDEX CONCURRENTLY」コマンドを使用してインデックスへの書き込みをブロックせずにインデックスを再構築する機能が導入され、長時間のインデックス再構築のダウンタイムシナリオを回避できます。

さらに、PostgreSQL 12では、「pg_checksums」コマンドを使用してオフラインクラスターでページチェックサムを有効または無効にできるようになりました。
以前は、ディスクに保存されたデータの整合性を検証する機能であるページチェックサムは、PostgreSQLクラスタが「initdb」で初期化されたときにのみ有効にできました。

このリリースに含まれる機能の完全なリストについては、https：//www.postgresql.org/docs/12/release-12.htmlにあるリリースノートをご覧ください。

## PostgreSQLについて

PostgreSQLは、世界で最も先進的なオープンソースデータベースであり、数千人のユーザー、貢献者、企業、組織のグローバルコミュニティを持っています。
 PostgreSQLプロジェクトは、カリフォルニア大学バークレー校を始めとする30年以上のエンジニアリングに基づいており、比類のないペースで開発を続けています。
 PostgreSQLの成熟した機能セットは、トップレベルの専有データベースシステムと一致するだけでなく、高度なデータベース機能、拡張性、セキュリティ、および安定性においてそれらを上回ります。


